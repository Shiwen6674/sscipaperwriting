<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page.title">登入 ScholarCraft | AI 輔助 SSCI 論文寫作系統</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Serif+TC:wght@700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .serif-font { font-family: 'Noto Serif TC', serif; }
        
        /* 動畫效果 */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        /* 背景裝飾 */
        .bg-pattern {
            background-image: radial-gradient(#4f46e5 1px, transparent 1px);
            background-size: 24px 24px;
            opacity: 0.1;
        }
    </style>
</head>
<body class="h-screen flex overflow-hidden bg-white">

    <!-- 左側：品牌與介紹區 (Left Panel - Branding) -->
    <div class="hidden lg:flex w-1/2 bg-slate-900 relative flex-col justify-between p-12 text-white overflow-hidden">
        <!-- 背景裝飾 -->
        <div class="absolute inset-0 bg-pattern"></div>
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-indigo-600 rounded-full blur-3xl opacity-20"></div>
        <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-purple-600 rounded-full blur-3xl opacity-20"></div>

        <!-- Logo & Header -->
        <div class="relative z-10">
            <div class="flex items-center gap-3 mb-6">
                <i class="fa-solid fa-graduation-cap text-4xl text-indigo-400"></i>
                <span class="text-3xl font-bold tracking-wide">ScholarCraft</span>
            </div>
            <h2 class="text-4xl font-bold mb-4 serif-font leading-tight" data-i18n-html="brand.heading">
                歡迎使用<br>
                <span class="text-indigo-400">AI 輔助 SSCI 論文寫作系統</span>
            </h2>
            <p class="text-yellow-300 text-lg whitespace-nowrap" data-i18n="brand.description">
                專為研究者打造，從主題規劃、文獻分析、章節撰寫到完成終稿，全流程AI輔助協作。
            </p>
        </div>

        <!-- Features -->
        <div class="relative z-10 space-y-8">
            <div class="flex gap-4">
                <div class="w-12 h-12 bg-indigo-500/20 rounded-xl flex items-center justify-center text-indigo-300 text-xl shrink-0">
                    <i class="fa-solid fa-database"></i>
                </div>
                <div>
                    <h3 class="font-bold text-xl mb-1" data-i18n="feature1.title">100％真實文獻引用</h3>
                    <p class="text-slate-400 text-sm leading-relaxed" data-i18n="feature1.text">
                        系統直接解析您上傳之真實文獻庫，確保每一筆引用皆可追溯、可查證，完全杜絕 AI 幻覺與造假風險。
                    </p>
                </div>
            </div>
            <div class="flex gap-4">
                <div class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center text-purple-300 text-xl shrink-0">
                    <i class="fa-solid fa-pen-nib"></i>
                </div>
                <div>
                    <h3 class="font-bold text-xl mb-1" data-i18n="feature2.title">SSCI 寫作策略</h3>
                    <p class="text-slate-400 text-sm leading-relaxed" data-i18n="feature2.text">
                        內建 SSCI 期刊寫作架構與審查邏輯，從緒論鋪陳到結果與討論，逐步引導您完成結構清晰、論證嚴謹的學術論文。
                    </p>
                </div>
            </div>
            <div class="flex gap-4">
                <div class="w-12 h-12 bg-teal-500/20 rounded-xl flex items-center justify-center text-teal-300 text-xl shrink-0">
                    <i class="fa-solid fa-check-double"></i>
                </div>
                <div>
                    <h3 class="font-bold text-xl mb-1" data-i18n="feature3.title">嚴謹學術水準</h3>
                    <p class="text-slate-400 text-sm leading-relaxed" data-i18n="feature3.text">
                        支援量化與質性分析方法，整合理論脈絡與實證貢獻，協助您撰寫與發表符合國際學術規範的研究成果。
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="relative z-10 border-t border-slate-700 pt-6">
            <p class="font-serif font-bold text-lg" data-i18n="footer.institute">Institute of Science Education, National Dong-Hwa University</p>
            <p class="text-slate-400 mt-1 flex items-center gap-2">
                <i class="fa-solid fa-envelope"></i> shiwen@gms.ndhu.edu.tw
            </p>
        </div>
    </div>

    <!-- 右側：表單區 (Right Panel - Forms) -->
    <div class="w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50 relative">

        <!-- 多語選單 -->
        <div class="absolute top-4 right-4 flex items-center gap-2 text-xs text-slate-600">
            <i class="fa-solid fa-globe"></i>
            <select id="lang-select" class="border border-slate-300 rounded-md px-2 py-1 bg-white text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500">
                <option value="zh-TW">繁中</option>
                <option value="en">English</option>
                <option value="ja">日本語</option>
                <option value="zh-CN">简中</option>
                <option value="vi">Tiếng Việt</option>
                <option value="id">Bahasa Indonesia</option>
                <option value="th">ไทย</option>
            </select>
        </div>

        <div class="w-full max-w-md bg-white p-10 rounded-2xl shadow-xl border border-slate-100 relative overflow-hidden">
            
            <!-- 1. 登入表單 (Login Form) -->
            <div id="view-login" class="animate-fade-in">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-800" data-i18n="login.title">登入系統</h2>
                    <p class="text-slate-500 text-sm mt-2" data-i18n="login.subtitle">請輸入您的帳號密碼以繼續</p>
                </div>

                <form onsubmit="handleLogin(event)" class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1" data-i18n="login.emailLabel">Email 帳號</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-slate-400"><i class="fa-solid fa-envelope"></i></span>
                            <input type="email" id="login-email" required
                                   class="w-full pl-10 pr-4 py-2.5 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
                                   placeholder="name@example.com"
                                   data-i18n-placeholder="login.emailPlaceholder">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1" data-i18n="login.passwordLabel">密碼</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-slate-400"><i class="fa-solid fa-lock"></i></span>
                            <input type="password" id="login-password" required
                                   class="w-full pl-10 pr-10 py-2.5 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"
                                   placeholder="••••••••"
                                   data-i18n-placeholder="login.passwordPlaceholder">
                            <button type="button" onclick="togglePassword('login-password', this)" class="absolute right-3 top-3 text-slate-400 hover:text-indigo-600 transition-colors">
                                <i class="fa-regular fa-eye-slash"></i>
                            </button>
                        </div>
                        <div class="flex justify-end mt-2">
                            <button type="button" onclick="switchView('forgot')" class="text-xs text-indigo-600 hover:text-indigo-800 font-medium" data-i18n="login.forgotLink">忘記密碼？</button>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md hover:shadow-lg transition-all transform active:scale-95" data-i18n="login.button">
                        登入
                    </button>
                </form>

                <div class="mt-8 text-center">
                    <p class="text-sm text-slate-600">
                        <span data-i18n="login.noAccountText">還沒有帳號？</span> 
                        <button onclick="switchView('register')" class="text-indigo-600 font-bold hover:underline" data-i18n="login.registerLink">尚未註冊？</button>
                    </p>
                </div>
            </div>

            <!-- 2. 註冊表單 (Register Form) -->
            <div id="view-register" class="hidden animate-fade-in">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-slate-800" data-i18n="register.title">註冊新帳號</h2>
                    <p class="text-slate-500 text-sm mt-2" data-i18n="register.subtitle">讓我們開始您的學術寫作之旅</p>
                </div>

                <form onsubmit="handleRegister(event)" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.nameLabel">真實姓名</label>
                            <input type="text" id="reg-name" required
                                   class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                                   placeholder="王小明"
                                   data-i18n-placeholder="register.namePlaceholder">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.genderLabel">性別</label>
                            <select id="reg-gender" class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none">
                                <option data-i18n="register.genderMale">男</option>
                                <option data-i18n="register.genderFemale">女</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.orgLabel">服務單位</label>
                        <input type="text" id="reg-org" required
                               class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                               placeholder="例如：國立東華大學"
                               data-i18n-placeholder="register.orgPlaceholder">
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.emailLabel">Email (帳號)</label>
                        <input type="email" id="reg-email" required
                               class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                               placeholder="name@example.com"
                               data-i18n-placeholder="register.emailPlaceholder">
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.passwordLabel">設定密碼</label>
                        <div class="relative">
                            <input type="password" id="reg-password" required
                                   class="w-full px-3 py-2 pr-10 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                                   placeholder="12字元以上, 含大小寫及特殊符號"
                                   data-i18n-placeholder="register.passwordPlaceholder">
                            <button type="button" onclick="togglePassword('reg-password', this)" class="absolute right-3 top-2.5 text-slate-400 hover:text-indigo-600">
                                <i class="fa-regular fa-eye-slash"></i>
                            </button>
                        </div>
                        <p class="text-[10px] text-slate-400 mt-1" data-i18n="register.passwordHint">* 需含英文大小寫、特殊符號 (!@#$%^&*) 且長度 > 12</p>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-700 mb-1" data-i18n="register.confirmPasswordLabel">確認密碼</label>
                        <div class="relative">
                            <input type="password" id="reg-confirm-password" required
                                   class="w-full px-3 py-2 pr-10 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                                   placeholder="再次輸入密碼"
                                   data-i18n-placeholder="register.confirmPasswordPlaceholder">
                            <button type="button" onclick="togglePassword('reg-confirm-password', this)" class="absolute right-3 top-2.5 text-slate-400 hover:text-indigo-600">
                                <i class="fa-regular fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md mt-2 transition-all" data-i18n="register.button">
                        立即註冊
                    </button>
                </form>

                <div class="mt-4 text-center">
                    <button onclick="switchView('login')" class="text-sm text-slate-500 hover:text-indigo-600 transition-colors">
                        <i class="fa-solid fa-arrow-left mr-1"></i> <span data-i18n="register.backLogin">返回登入</span>
                    </button>
                </div>
            </div>

            <!-- 3. 忘記密碼表單 (Forgot Password) -->
            <div id="view-forgot" class="hidden animate-fade-in">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">
                        <i class="fa-solid fa-key"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-slate-800" data-i18n="forgot.title">重設密碼</h2>
                    <p class="text-slate-500 text-sm mt-2" data-i18n="forgot.subtitle">輸入您的註冊信箱，我們將寄送密碼給您。</p>
                </div>

                <form onsubmit="handleForgotPassword(event)" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1" data-i18n="forgot.emailLabel">Email 帳號</label>
                        <input type="email" id="forgot-email" required
                               class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none"
                               placeholder="name@example.com"
                               data-i18n-placeholder="forgot.emailPlaceholder">
                    </div>

                    <button type="submit" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 rounded-lg shadow-md transition-all" data-i18n="forgot.button">
                        發送重設信件
                    </button>
                </form>

                <div class="mt-8 text-center">
                    <button onclick="switchView('login')" class="text-sm text-slate-500 hover:text-indigo-600 transition-colors">
                        <i class="fa-solid fa-arrow-left mr-1"></i> <span data-i18n="forgot.backLogin">返回登入</span>
                    </button>
                </div>
            </div>

        </div>
        
        <!-- Mobile Footer (Only visible on small screens) -->
        <div class="lg:hidden absolute bottom-4 text-center w-full px-4">
            <p class="text-xs text-slate-400" data-i18n="footer.institute">Institute of Science Education, National Dong-Hwa University</p>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // CONFIG: 請替換為您的 GAS Web App URL
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbxzuSB40CJ_8VgEG5HsZR0QBqShK5TMKQAHHkQf_ww4gGy90uWZUoLjiuwbBpT4BkJoKQ/exec";

        // API 呼叫函式（★ 只在這裡做最小修正，避免 CORS 及 JSON 解析錯誤）
        async function callBackendAPI(payload) {
            try {
                const response = await fetch(GAS_API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "text/plain;charset=utf-8" }, // simple request，避免 preflight
                    body: JSON.stringify(payload)
                });

                const text = await response.text();
                try {
                    return JSON.parse(text);
                } catch (e) {
                    console.error("API 回傳不是合法 JSON：", text);
                    return { status: "error", message: "伺服器回傳格式錯誤。" };
                }
            } catch (error) {
                console.error("API Error:", error);
                return { status: "error", message: "連線失敗，請檢查網路。" };
            }
        }

        // 1. 切換視圖 (Login / Register / Forgot)
        function switchView(viewId) {
            ['login', 'register', 'forgot'].forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden');
            });
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
        }

        // 2. 顯示/隱藏密碼 (小眼睛)
        function togglePassword(inputId, btn) {
            const input = document.getElementById(inputId);
            const icon = btn.querySelector('i');
            
            if (input.type === "password") {
                input.type = "text";
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
                btn.classList.add('text-indigo-600');
            } else {
                input.type = "password";
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
                btn.classList.remove('text-indigo-600');
            }
        }

        // 3. 處理登入
        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const btn = e.target.querySelector('button[type="submit"]');
            
            // UI Loading
            const originalText = btn.innerText;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> 驗證中...';
            btn.disabled = true;

            // ✅ 呼叫後端 API 進行登入（payload 結構配合後端）
            const res = await callBackendAPI({
                action: "login",
                email: email,
                password: password
            });

            if (res.status === 'success') {
                // 登入成功，跳轉到 app.html
                window.location.href = "app.html"; 
            } else {
                alert("登入失敗: " + res.message);
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // 4. 處理註冊 (含嚴格密碼驗證)
        async function handleRegister(e) {
            e.preventDefault();
            const pwd = document.getElementById('reg-password').value;
            const confirmPwd = document.getElementById('reg-confirm-password').value;

            // 驗證規則
            const lengthCheck = pwd.length >= 12;
            const upperCheck = /[A-Z]/.test(pwd);
            const lowerCheck = /[a-z]/.test(pwd);
            const specialCheck = /[!@#$%^&*]/.test(pwd);

            if (!lengthCheck || !upperCheck || !lowerCheck || !specialCheck) {
                alert("密碼不符合規定！\n需包含：\n- 12個字元以上\n- 英文大寫\n- 英文小寫\n- 特殊符號 (!@#$%^&*)");
                return;
            }

            if (pwd !== confirmPwd) {
                alert("兩次輸入的密碼不一致！");
                return;
            }

            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerText;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> 註冊中...';
            btn.disabled = true;

            // ✅ 呼叫後端 API 進行註冊（payload 結構配合後端）
            const res = await callBackendAPI({
                action: "register",
                name: document.getElementById('reg-name').value,
                gender: document.getElementById('reg-gender').value,
                organization: document.getElementById('reg-org').value,
                email: document.getElementById('reg-email').value,
                password: pwd
            });

            if (res.status === 'success') {
                alert("註冊成功！請使用新帳號登入。");
                switchView('login');
            } else {
                alert("註冊失敗: " + res.message);
            }
            btn.innerHTML = originalText;
            btn.disabled = false;
        }

        // 5. 處理忘記密碼
        function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgot-email').value;
            
            // 模擬發信 (如果需要真實發信，後端需要串接 MailApp.sendEmail)
            alert(`已將密碼重設信件發送至：${email}\n請查收信件以找回密碼。`);
            switchView('login');
        }

        // ================= 多語系設定（新增） =================

        const translations = {
            'zh-TW': {
                'page.title': '登入 ScholarCraft | SSCI 論文寫作系統',
                'brand.heading': '歡迎使用<br><span class="text-indigo-400">AI 輔助學術論文系統</span>',
                'brand.description': '專為研究者打造，從主題規劃、文獻分析、章節撰寫到完成終稿，全流程AI輔助協作。',
                'feature1.title': '100％真實文獻引用',
                'feature1.text': '系統直接解析您上傳之真實文獻庫，確保每一筆引用皆可追溯、可查證，大幅降低 AI 幻覺與造假風險。',
                'feature2.title': 'SSCI 寫作策略',
                'feature2.text': '內建 SSCI 期刊常見的寫作與審查邏輯，從緒論鋪陳到結果與討論，逐步引導您完成結構清晰、論證嚴謹的學術論文。',
                'feature3.title': '嚴謹學術水準',
                'feature3.text': '支援量化與質性分析整合，強調理論脈絡與實證貢獻，協助您撰寫符合國際學術規範的研究成果。',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': '登入系統',
                'login.subtitle': '請輸入您的帳號密碼以繼續',
                'login.emailLabel': 'Email 帳號',
                'login.passwordLabel': '密碼',
                'login.forgotLink': '忘記密碼？',
                'login.button': '登入',
                'login.noAccountText': '還沒有帳號？',
                'login.registerLink': '尚未註冊？',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': '註冊新帳號',
                'register.subtitle': '讓我們開始您的學術寫作之旅',
                'register.nameLabel': '真實姓名',
                'register.namePlaceholder': '王小明',
                'register.genderLabel': '性別',
                'register.genderMale': '男',
                'register.genderFemale': '女',
                'register.orgLabel': '服務單位',
                'register.orgPlaceholder': '例如：國立東華大學',
                'register.emailLabel': 'Email (帳號)',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': '設定密碼',
                'register.passwordPlaceholder': '12字元以上, 含大小寫及特殊符號',
                'register.passwordHint': '* 需含英文大小寫、特殊符號 (!@#$%^&*) 且長度 > 12',
                'register.confirmPasswordLabel': '確認密碼',
                'register.confirmPasswordPlaceholder': '再次輸入密碼',
                'register.button': '立即註冊',
                'register.backLogin': '返回登入',

                'forgot.title': '重設密碼',
                'forgot.subtitle': '輸入您的註冊信箱，我們將寄送密碼給您。',
                'forgot.emailLabel': 'Email 帳號',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': '發送重設信件',
                'forgot.backLogin': '返回登入'
            },
            'en': {
                'page.title': 'Sign in | ScholarCraft SSCI Writing System',
                'brand.heading': 'Welcome to<br><span class="text-indigo-400">AI-Assisted Academic Writing System</span>',
                'brand.description': 'Designed for researchers, supporting the full pipeline from topic design and literature review to chapter drafting and final manuscript with AI assistance.',
                'feature1.title': '100% Authentic References',
                'feature1.text': 'The system parses your uploaded WoS libraries so that every citation is real, avoiding AI hallucinations and fabricated sources.',
                'feature2.title': 'SSCI Writing Strategies',
                'feature2.text': 'Built-in logic from top SSCI journal editors guides you from introduction to discussion to craft high-quality papers.',
                'feature3.title': 'Rigorous Academic Ethics',
                'feature3.text': 'Emphasizes scholarly contribution and critical dialogue, helping you complete studies that meet ethical and methodological standards.',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': 'Sign In',
                'login.subtitle': 'Please enter your email and password to continue.',
                'login.emailLabel': 'Email',
                'login.passwordLabel': 'Password',
                'login.forgotLink': 'Forgot password?',
                'login.button': 'Sign In',
                'login.noAccountText': 'No account yet?',
                'login.registerLink': 'Register now',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': 'Create an Account',
                'register.subtitle': 'Start your academic writing journey with ScholarCraft.',
                'register.nameLabel': 'Full Name',
                'register.namePlaceholder': 'John Wang',
                'register.genderLabel': 'Gender',
                'register.genderMale': 'Male',
                'register.genderFemale': 'Female',
                'register.orgLabel': 'Affiliation',
                'register.orgPlaceholder': 'e.g., National Dong-Hwa University',
                'register.emailLabel': 'Email (Login ID)',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': 'Set Password',
                'register.passwordPlaceholder': 'At least 12 chars, mixed case & symbols',
                'register.passwordHint': '* Must include upper & lower case letters, special symbols (!@#$%^&*), and length > 12.',
                'register.confirmPasswordLabel': 'Confirm Password',
                'register.confirmPasswordPlaceholder': 'Re-enter password',
                'register.button': 'Register',
                'register.backLogin': 'Back to Sign In',

                'forgot.title': 'Reset Password',
                'forgot.subtitle': 'Enter your registered email and we will send you a reset link.',
                'forgot.emailLabel': 'Email',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': 'Send Reset Email',
                'forgot.backLogin': 'Back to Sign In'
            },
            'ja': {
                'page.title': 'ログイン | ScholarCraft SSCI 論文支援システム',
                'brand.heading': 'ようこそ<br><span class="text-indigo-400">AI 学術論文支援システム</span> へ',
                'brand.description': '研究者のために設計されたシステムで、テーマ設定、文献レビュー、章立て執筆から最終原稿まで、AI が一貫してサポートします。',
                'feature1.title': '100％ 実在する文献のみ',
                'feature1.text': 'アップロードされた WoS 文献データを解析し、すべての引用が実在する文献であることを保証し、AI の「幻覚」や捏造を防ぎます。',
                'feature2.title': 'SSCI 論文の書き方ロジック',
                'feature2.text': 'トップ SSCI ジャーナル編集者のロジックを組み込み、序論から考察まで、高品質な論文執筆をガイドします。',
                'feature3.title': '厳格な学術倫理',
                'feature3.text': '学術的貢献と批判的対話を重視し、倫理と方法論の要件を満たした研究完成を支援します。',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': 'ログイン',
                'login.subtitle': 'メールアドレスとパスワードを入力してください。',
                'login.emailLabel': 'メールアドレス',
                'login.passwordLabel': 'パスワード',
                'login.forgotLink': 'パスワードをお忘れですか？',
                'login.button': 'ログイン',
                'login.noAccountText': 'アカウントをお持ちではありませんか？',
                'login.registerLink': '新規登録',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': '新規アカウント登録',
                'register.subtitle': 'ScholarCraft で学術執筆を始めましょう。',
                'register.nameLabel': '氏名',
                'register.namePlaceholder': '山田 太郎',
                'register.genderLabel': '性別',
                'register.genderMale': '男性',
                'register.genderFemale': '女性',
                'register.orgLabel': '所属機関',
                'register.orgPlaceholder': '例：国立東華大学',
                'register.emailLabel': 'メールアドレス（ログイン ID）',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': 'パスワード設定',
                'register.passwordPlaceholder': '12文字以上・大文字小文字・記号を含む',
                'register.passwordHint': '* 英大文字・英小文字・記号 (!@#$%^&*) を含み、12文字以上である必要があります。',
                'register.confirmPasswordLabel': 'パスワード確認',
                'register.confirmPasswordPlaceholder': 'もう一度入力',
                'register.button': '登録',
                'register.backLogin': 'ログインに戻る',

                'forgot.title': 'パスワード再設定',
                'forgot.subtitle': '登録したメールアドレスを入力してください。再設定用メールを送信します。',
                'forgot.emailLabel': 'メールアドレス',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': '再設定メールを送信',
                'forgot.backLogin': 'ログインに戻る'
            },
            'zh-CN': {
                'page.title': '登录 ScholarCraft | SSCI 论文写作系统',
                'brand.heading': '欢迎使用<br><span class="text-indigo-400">AI 辅助学术论文系统</span>',
                'brand.description': '专为研究者打造，从选题规划、文献分析、章节撰写到完成终稿，全流程由 AI 协助。',
                'feature1.title': '100％ 真实文献引用',
                'feature1.text': '系统直接解析您上传的 WoS 文献库，确保每一条引用都真实存在，完全避免 AI 幻觉与造假。',
                'feature2.title': 'SSCI 写作策略',
                'feature2.text': '内建顶级 SSCI 期刊编辑逻辑，从引言到讨论，协助您写出高质量学术论文。',
                'feature3.title': '严谨学术伦理',
                'feature3.text': '强调学术贡献与批判性对话，协助您完成符合学术规范的高水准研究。',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': '登录系统',
                'login.subtitle': '请输入账号与密码以继续。',
                'login.emailLabel': 'Email 账号',
                'login.passwordLabel': '密码',
                'login.forgotLink': '忘记密码？',
                'login.button': '登录',
                'login.noAccountText': '还没有账号？',
                'login.registerLink': '立即注册',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': '注册新账号',
                'register.subtitle': '让我们开始您的学术写作之旅。',
                'register.nameLabel': '真实姓名',
                'register.namePlaceholder': '王小明',
                'register.genderLabel': '性别',
                'register.genderMale': '男',
                'register.genderFemale': '女',
                'register.orgLabel': '服务单位',
                'register.orgPlaceholder': '例如：国立东华大学',
                'register.emailLabel': 'Email（账号）',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': '设置密码',
                'register.passwordPlaceholder': '12 个字符以上，含大小写与特殊符号',
                'register.passwordHint': '* 需包含英文大小写、特殊符号 (!@#$%^&*) 且长度 > 12',
                'register.confirmPasswordLabel': '确认密码',
                'register.confirmPasswordPlaceholder': '再次输入密码',
                'register.button': '立即注册',
                'register.backLogin': '返回登录',

                'forgot.title': '重设密码',
                'forgot.subtitle': '请输入注册邮箱，我们将发送重设密码邮件。',
                'forgot.emailLabel': 'Email 账号',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': '发送重设邮件',
                'forgot.backLogin': '返回登录'
            },
            'vi': {
                'page.title': 'Đăng nhập | Hệ thống viết bài SSCI ScholarCraft',
                'brand.heading': 'Chào mừng đến với<br><span class="text-indigo-400">Hệ thống hỗ trợ viết luận văn bằng AI</span>',
                'brand.description': 'Được thiết kế cho nhà nghiên cứu, hỗ trợ toàn bộ quy trình từ chọn đề tài, tổng quan tài liệu, viết chương đến bản thảo cuối cùng với sự trợ giúp của AI.',
                'feature1.title': '100% tài liệu tham khảo thật',
                'feature1.text': 'Hệ thống phân tích thư viện WoS bạn tải lên, đảm bảo mọi trích dẫn đều là tài liệu có thật, tránh ảo giác và bịa đặt của AI.',
                'feature2.title': 'Chiến lược viết bài chuẩn SSCI',
                'feature2.text': 'Tích hợp logic của các biên tập viên tạp chí SSCI hàng đầu, dẫn dắt bạn từ Mở đầu đến Thảo luận để tạo ra bài báo chất lượng cao.',
                'feature3.title': 'Đạo đức học thuật nghiêm ngặt',
                'feature3.text': 'Nhấn mạnh đóng góp học thuật và đối thoại phê phán, giúp bạn hoàn thành nghiên cứu đáp ứng chuẩn mực đạo đức và phương pháp.',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': 'Đăng nhập',
                'login.subtitle': 'Vui lòng nhập email và mật khẩu để tiếp tục.',
                'login.emailLabel': 'Email',
                'login.passwordLabel': 'Mật khẩu',
                'login.forgotLink': 'Quên mật khẩu?',
                'login.button': 'Đăng nhập',
                'login.noAccountText': 'Chưa có tài khoản?',
                'login.registerLink': 'Đăng ký ngay',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': 'Đăng ký tài khoản mới',
                'register.subtitle': 'Hãy bắt đầu hành trình viết học thuật của bạn với ScholarCraft.',
                'register.nameLabel': 'Họ và tên',
                'register.namePlaceholder': 'Nguyễn Văn A',
                'register.genderLabel': 'Giới tính',
                'register.genderMale': 'Nam',
                'register.genderFemale': 'Nữ',
                'register.orgLabel': 'Cơ quan / Trường',
                'register.orgPlaceholder': 'Ví dụ: Đại học Đông Hoa Quốc gia',
                'register.emailLabel': 'Email (tài khoản)',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': 'Mật khẩu',
                'register.passwordPlaceholder': 'Tối thiểu 12 ký tự, gồm hoa, thường & ký tự đặc biệt',
                'register.passwordHint': '* Cần có chữ hoa, chữ thường, ký tự đặc biệt (!@#$%^&*) và độ dài > 12.',
                'register.confirmPasswordLabel': 'Xác nhận mật khẩu',
                'register.confirmPasswordPlaceholder': 'Nhập lại mật khẩu',
                'register.button': 'Đăng ký',
                'register.backLogin': 'Quay lại đăng nhập',

                'forgot.title': 'Đặt lại mật khẩu',
                'forgot.subtitle': 'Nhập email đã đăng ký, chúng tôi sẽ gửi hướng dẫn đặt lại mật khẩu.',
                'forgot.emailLabel': 'Email',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': 'Gửi email đặt lại',
                'forgot.backLogin': 'Quay lại đăng nhập'
            },
            'id': {
                'page.title': 'Masuk | Sistem Penulisan SSCI ScholarCraft',
                'brand.heading': 'Selamat datang di<br><span class="text-indigo-400">Sistem Penulisan Akademik Berbasis AI</span>',
                'brand.description': 'Dirancang untuk peneliti, mendukung seluruh proses dari perencanaan topik, telaah pustaka, penulisan bab hingga naskah akhir dengan bantuan AI.',
                'feature1.title': '100% Referensi Asli',
                'feature1.text': 'Sistem menganalisis pustaka WoS yang Anda unggah sehingga setiap sitiran benar-benar ada, mencegah halusinasi dan rekayasa referensi oleh AI.',
                'feature2.title': 'Strategi Penulisan Berstandar SSCI',
                'feature2.text': 'Logika editor jurnal SSCI terkemuka tertanam di dalam sistem, membimbing Anda dari Pendahuluan hingga Diskusi untuk menghasilkan artikel berkualitas tinggi.',
                'feature3.title': 'Etika Akademik yang Ketat',
                'feature3.text': 'Menekankan kontribusi ilmiah dan dialog kritis, membantu Anda menyelesaikan riset yang memenuhi standar etika dan metodologis.',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': 'Masuk',
                'login.subtitle': 'Silakan masukkan email dan kata sandi untuk melanjutkan.',
                'login.emailLabel': 'Email',
                'login.passwordLabel': 'Kata sandi',
                'login.forgotLink': 'Lupa kata sandi?',
                'login.button': 'Masuk',
                'login.noAccountText': 'Belum punya akun?',
                'login.registerLink': 'Daftar sekarang',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': 'Buat Akun Baru',
                'register.subtitle': 'Mulai perjalanan penulisan akademik Anda dengan ScholarCraft.',
                'register.nameLabel': 'Nama lengkap',
                'register.namePlaceholder': 'Budi Santoso',
                'register.genderLabel': 'Jenis kelamin',
                'register.genderMale': 'Laki-laki',
                'register.genderFemale': 'Perempuan',
                'register.orgLabel': 'Institusi',
                'register.orgPlaceholder': 'Contoh: National Dong-Hwa University',
                'register.emailLabel': 'Email (akun)',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': 'Atur kata sandi',
                'register.passwordPlaceholder': 'Minimal 12 karakter, huruf besar-kecil & simbol',
                'register.passwordHint': '* Harus mencakup huruf besar, huruf kecil, simbol (!@#$%^&*), dan panjang > 12.',
                'register.confirmPasswordLabel': 'Konfirmasi kata sandi',
                'register.confirmPasswordPlaceholder': 'Ketik ulang kata sandi',
                'register.button': 'Daftar',
                'register.backLogin': 'Kembali ke halaman masuk',

                'forgot.title': 'Atur ulang kata sandi',
                'forgot.subtitle': 'Masukkan email terdaftar, kami akan mengirimkan instruksi pengaturan ulang.',
                'forgot.emailLabel': 'Email',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': 'Kirim email reset',
                'forgot.backLogin': 'Kembali ke halaman masuk'
            },
            'th': {
                'page.title': 'เข้าสู่ระบบ | ระบบเขียนบทความ SSCI ScholarCraft',
                'brand.heading': 'ยินดีต้อนรับสู่<br><span class="text-indigo-400">ระบบช่วยเขียนบทความวิชาการด้วย AI</span>',
                'brand.description': 'ออกแบบมาสำหรับนักวิจัย รองรับทั้งกระบวนการตั้งหัวข้อ ทบทวนวรรณกรรม เขียนบท และจัดทำต้นฉบับสุดท้ายด้วยความช่วยเหลือจาก AI.',
                'feature1.title': 'เอกสารอ้างอิงจริง 100%',
                'feature1.text': 'ระบบวิเคราะห์ฐานข้อมูล WoS ที่คุณอัปโหลด เพื่อให้มั่นใจว่าแหล่งอ้างอิงทุกบรรทัดมีอยู่จริง ป้องกันการแต่งหรือหลงผิดของ AI.',
                'feature2.title': 'กลยุทธ์การเขียนตามมาตรฐาน SSCI',
                'feature2.text': 'ฝังตรรกะของบรรณาธิการวารสาร SSCI ชั้นนำ ช่วยนำทางคุณตั้งแต่บทนำจนถึงอภิปรายผล เพื่อสร้างบทความคุณภาพสูง.',
                'feature3.title': 'จริยธรรมทางวิชาการที่เคร่งครัด',
                'feature3.text': 'เน้นการสร้างองค์ความรู้และการอภิปรายเชิงวิพากษ์ ช่วยให้การวิจัยของคุณสอดคล้องกับมาตรฐานด้านจริยธรรมและวิธีวิจัย.',
                'footer.institute': 'Institute of Science Education, National Dong-Hwa University',

                'login.title': 'เข้าสู่ระบบ',
                'login.subtitle': 'กรุณากรอกอีเมลและรหัสผ่านเพื่อดำเนินการต่อ',
                'login.emailLabel': 'อีเมล',
                'login.passwordLabel': 'รหัสผ่าน',
                'login.forgotLink': 'ลืมรหัสผ่าน?',
                'login.button': 'เข้าสู่ระบบ',
                'login.noAccountText': 'ยังไม่มีบัญชี?',
                'login.registerLink': 'สมัครสมาชิก',
                'login.emailPlaceholder': 'name@example.com',
                'login.passwordPlaceholder': '••••••••',

                'register.title': 'สมัครบัญชีใหม่',
                'register.subtitle': 'เริ่มต้นเส้นทางการเขียนเชิงวิชาการของคุณกับ ScholarCraft',
                'register.nameLabel': 'ชื่อ-นามสกุล',
                'register.namePlaceholder': 'ตัวอย่าง: Somchai',
                'register.genderLabel': 'เพศ',
                'register.genderMale': 'ชาย',
                'register.genderFemale': 'หญิง',
                'register.orgLabel': 'สังกัด / สถาบัน',
                'register.orgPlaceholder': 'เช่น National Dong-Hwa University',
                'register.emailLabel': 'อีเมล (บัญชีผู้ใช้)',
                'register.emailPlaceholder': 'name@example.com',
                'register.passwordLabel': 'ตั้งรหัสผ่าน',
                'register.passwordPlaceholder': 'อย่างน้อย 12 ตัวอักษร มีตัวพิมพ์เล็ก-ใหญ่และสัญลักษณ์',
                'register.passwordHint': '* ต้องมีตัวอักษรพิมพ์ใหญ่ พิมพ์เล็ก สัญลักษณ์ (!@#$%^&*) และยาวมากกว่า 12 ตัวอักษร',
                'register.confirmPasswordLabel': 'ยืนยันรหัสผ่าน',
                'register.confirmPasswordPlaceholder': 'กรอกรหัสผ่านอีกครั้ง',
                'register.button': 'สมัครสมาชิก',
                'register.backLogin': 'กลับไปหน้าเข้าสู่ระบบ',

                'forgot.title': 'รีเซ็ตรหัสผ่าน',
                'forgot.subtitle': 'กรุณากรอกอีเมลที่ใช้สมัคร เราจะส่งลิงก์สำหรับรีเซ็ตรหัสผ่านให้คุณ',
                'forgot.emailLabel': 'อีเมล',
                'forgot.emailPlaceholder': 'name@example.com',
                'forgot.button': 'ส่งอีเมลรีเซ็ต',
                'forgot.backLogin': 'กลับไปหน้าเข้าสู่ระบบ'
            }
        };

        let currentLang = 'zh-TW';

        function applyLanguage(lang) {
            const dict = translations[lang] || translations['zh-TW'];
            const fallback = translations['zh-TW'];

            document.documentElement.lang = lang;

            // 一般文字節點
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const text = dict[key] || fallback[key];
                if (text) {
                    el.textContent = text;
                }
            });

            // 需要 innerHTML 的（例如含 <br> 或 <span>）
            document.querySelectorAll('[data-i18n-html]').forEach(el => {
                const key = el.getAttribute('data-i18n-html');
                const html = dict[key] || fallback[key];
                if (html) {
                    el.innerHTML = html;
                }
            });

            // placeholder
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                const text = dict[key] || fallback[key];
                if (text) {
                    el.setAttribute('placeholder', text);
                }
            });

            // <title>
            const titleKey = 'page.title';
            const pageTitle = dict[titleKey] || fallback[titleKey];
            if (pageTitle) {
                document.title = pageTitle;
                const titleEl = document.querySelector('title[data-i18n="page.title"]');
                if (titleEl) titleEl.textContent = pageTitle;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            const select = document.getElementById('lang-select');
            if (select) {
                select.value = currentLang;
                select.addEventListener('change', function (e) {
                    currentLang = e.target.value;
                    applyLanguage(currentLang);
                });
            }
            applyLanguage(currentLang);
        });
    </script>
</body>
</html>
